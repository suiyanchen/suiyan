<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±åº¦è§£æ¢¦å¤§å¸ˆ - ä¸“ä¸šå¿ƒç†æ¢¦å¢ƒåˆ†æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #667eea 50%, #764ba2 75%, #f093fb 100%);
            min-height: 100vh;
            color: #333;
            position: relative;
            animation: gradientShift 15s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #667eea 50%, #764ba2 75%, #f093fb 100%); }
            50% { background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #ffecd2 75%, #fcb69f 100%); }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)" opacity="0.5"><animate attributeName="opacity" values="0.2;0.8;0.2" dur="4s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="0.8" fill="rgba(255,255,255,0.15)" opacity="0.3"><animate attributeName="opacity" values="0.3;0.9;0.3" dur="6s" repeatCount="indefinite"/></circle><circle cx="50" cy="70" r="1.2" fill="rgba(255,255,255,0.12)" opacity="0.4"><animate attributeName="opacity" values="0.4;1;0.4" dur="8s" repeatCount="indefinite"/></circle><circle cx="30" cy="60" r="0.6" fill="rgba(255,255,255,0.18)" opacity="0.6"><animate attributeName="opacity" values="0.6;0.2;0.6" dur="5s" repeatCount="indefinite"/></circle></svg>') repeat;
            z-index: -1;
        }

        .header {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 3px solid rgba(255, 255, 255, 0.2);
            padding: 25px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            color: white;
            font-size: 3rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientText 4s ease-in-out infinite;
        }

        @keyframes gradientText {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            font-style: italic;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .wizard-container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            position: relative;
        }

        .wizard-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 200% 200%;
            animation: progressGlow 3s ease-in-out infinite;
        }

        @keyframes progressGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-bar {
            height: 6px;
            background: #e1e5e9;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 16.66%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            padding: 30px 40px;
            background: #f8f9fa;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #dee2e6;
            z-index: 1;
        }

        .step.active:not(:last-child)::after {
            background: #667eea;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #6c757d;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            background: #667eea;
            color: white;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }

        .step.completed .step-circle {
            background: #28a745;
            color: white;
        }

        .step-label {
            font-size: 0.9rem;
            color: #6c757d;
            text-align: center;
            font-weight: 600;
        }

        .step.active .step-label {
            color: #667eea;
        }

        .step-content {
            padding: 40px;
            min-height: 600px;
        }

        .step-panel {
            display: none;
        }

        .step-panel.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #2d1b69;
            text-align: center;
            font-weight: 700;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.6;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .checkbox-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .radio-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
        }

        .radio-item input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e1e5e9;
            outline: none;
            -webkit-appearance: none;
            margin: 20px 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.3);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e1e5e9;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .analysis-result {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            padding: 40px;
            margin-top: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .result-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e1e5e9;
        }

        .result-title {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #2d1b69;
            font-weight: 700;
        }

        .result-subtitle {
            font-size: 1.2rem;
            color: #666;
        }

        .analysis-tabs {
            display: flex;
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 6px;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .analysis-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
            position: relative;
        }

        .analysis-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 0 15px 0 30px;
        }

        .analysis-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2d1b69;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analysis-content {
            line-height: 1.8;
            color: #444;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-card {
            text-align: center;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1rem;
            color: #666;
            margin-bottom: 15px;
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            overflow: hidden;
        }

        .score-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 1s ease;
        }

        .symbols-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .symbol-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4ecdc4;
        }

        .symbol-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: #2d1b69;
        }

        .symbol-meaning {
            color: #555;
            line-height: 1.6;
        }

        .recommendations {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .recommendations h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .recommendation-list {
            list-style: none;
            padding: 0;
        }

        .recommendation-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            padding-left: 30px;
        }

        .recommendation-list li::before {
            content: 'ğŸ’¡';
            position: absolute;
            left: 0;
            top: 12px;
        }

        .emotional-state {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .emotion-indicator {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .emotion-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .emotion-value {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .emotion-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .step-indicator {
                padding: 20px;
                overflow-x: auto;
            }

            .step {
                min-width: 100px;
            }

            .step-content {
                padding: 25px;
            }

            .score-grid {
                grid-template-columns: 1fr;
            }

            .analysis-tabs {
                flex-direction: column;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .mystical-spinner {
            width: 100px;
            height: 100px;
            margin: 0 auto 30px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .loading-subtext {
            font-size: 1rem;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”® æ·±åº¦è§£æ¢¦å¤§å¸ˆ</h1>
        <p>ä¸“ä¸šå¿ƒç†æ¢¦å¢ƒåˆ†æç³»ç»Ÿ</p>
        <div class="subtitle">åŸºäºè£æ ¼ã€å¼—æ´›ä¼Šå¾·ç†è®ºå’Œç°ä»£è®¤çŸ¥ç§‘å­¦çš„ç²¾å‡†è§£æ¢¦</div>
    </div>

    <div class="container">
        <div class="wizard-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="step-indicator">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">ä¸ªäººä¿¡æ¯</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">æ¢¦å¢ƒæè¿°</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">è¯¦ç»†è¦ç´ </div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">æƒ…æ„ŸçŠ¶æ€</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">5</div>
                    <div class="step-label">ç”Ÿæ´»èƒŒæ™¯</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-circle">6</div>
                    <div class="step-label">è§£æ¢¦ç»“æœ</div>
                </div>
            </div>

            <div class="step-content">
                <!-- ç¬¬ä¸€æ­¥ï¼šä¸ªäººä¿¡æ¯ -->
                <div class="step-panel active" id="step1">
                    <h2 class="section-title">ğŸ“‹ ä¸ªäººåŸºç¡€ä¿¡æ¯</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="age">å¹´é¾„</label>
                            <select id="age" class="form-select">
                                <option value="">è¯·é€‰æ‹©å¹´é¾„æ®µ</option>
                                <option value="18-25">18-25å²</option>
                                <option value="26-35">26-35å²</option>
                                <option value="36-45">36-45å²</option>
                                <option value="46-55">46-55å²</option>
                                <option value="56-65">56-65å²</option>
                                <option value="65+">65å²ä»¥ä¸Š</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="gender">æ€§åˆ«</label>
                            <select id="gender" class="form-select">
                                <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                                <option value="male">ç”·æ€§</option>
                                <option value="female">å¥³æ€§</option>
                                <option value="other">å…¶ä»–</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="occupation">èŒä¸šç±»å‹</label>
                            <select id="occupation" class="form-select">
                                <option value="">è¯·é€‰æ‹©èŒä¸šç±»å‹</option>
                                <option value="student">å­¦ç”Ÿ</option>
                                <option value="office">åŠå…¬å®¤èŒå‘˜</option>
                                <option value="teacher">æ•™å¸ˆ/æ•™è‚²å·¥ä½œè€…</option>
                                <option value="medical">åŒ»æŠ¤äººå‘˜</option>
                                <option value="business">å•†åŠ¡/é”€å”®</option>
                                <option value="creative">åˆ›æ„/è‰ºæœ¯å·¥ä½œè€…</option>
                                <option value="technical">æŠ€æœ¯/å·¥ç¨‹å¸ˆ</option>
                                <option value="service">æœåŠ¡ä¸š</option>
                                <option value="freelance">è‡ªç”±èŒä¸š</option>
                                <option value="unemployed">æš‚æ—¶å¾…ä¸š</option>
                                <option value="retired">é€€ä¼‘</option>
                                <option value="other">å…¶ä»–</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="relationship">æ„Ÿæƒ…çŠ¶æ€</label>
                            <select id="relationship" class="form-select">
                                <option value="">è¯·é€‰æ‹©æ„Ÿæƒ…çŠ¶æ€</option>
                                <option value="single">å•èº«</option>
                                <option value="dating">æ‹çˆ±ä¸­</option>
                                <option value="married">å·²å©š</option>
                                <option value="divorced">ç¦»å¼‚</option>
                                <option value="complicated">å¤æ‚çŠ¶æ€</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>å½“å‰ç”Ÿæ´»å‹åŠ›æ°´å¹³</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="5" class="slider" id="stressLevel">
                            <div class="slider-labels">
                                <span>å¾ˆè½»æ¾</span>
                                <span>é€‚ä¸­</span>
                                <span>éå¸¸å‹åŠ›å¤§</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ç¡çœ è´¨é‡</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="sleepQuality" value="excellent">
                                <span>éå¸¸å¥½</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="sleepQuality" value="good">
                                <span>è¾ƒå¥½</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="sleepQuality" value="average">
                                <span>ä¸€èˆ¬</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="sleepQuality" value="poor">
                                <span>è¾ƒå·®</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="sleepQuality" value="terrible">
                                <span>å¾ˆå·®</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬äºŒæ­¥ï¼šæ¢¦å¢ƒæè¿° -->
                <div class="step-panel" id="step2">
                    <h2 class="section-title">ğŸŒ™ è¯¦ç»†æ¢¦å¢ƒæè¿°</h2>
                    <div class="form-group full-width">
                        <label for="dreamDescription">è¯·å°½å¯èƒ½è¯¦ç»†åœ°æè¿°æ‚¨çš„æ¢¦å¢ƒ</label>
                        <textarea id="dreamDescription" class="form-textarea" rows="8"
                                  placeholder="è¯·æè¿°æ‚¨æ¢¦å¢ƒçš„å®Œæ•´è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼š
1. æ¢¦å¢ƒå‘ç”Ÿçš„åœ°ç‚¹å’Œç¯å¢ƒ
2. å‡ºç°çš„äººç‰©å’Œå…³ç³»
3. å‘ç”Ÿçš„å…·ä½“äº‹ä»¶å’Œæƒ…èŠ‚
4. æ‚¨åœ¨æ¢¦ä¸­çš„è§’è‰²å’Œè¡Œä¸º
5. æ¢¦å¢ƒçš„å¼€å§‹ã€å‘å±•å’Œç»“æŸ
6. ä»»ä½•ç‰¹æ®Šçš„æ„Ÿå—æˆ–å°è±¡

ä¾‹å¦‚ï¼šæˆ‘æ¢¦è§è‡ªå·±å›åˆ°äº†å°æ—¶å€™çš„å®¶ï¼Œæˆ¿å­æ¯”ç°å®ä¸­æ›´å¤§æ›´æ˜äº®ã€‚æˆ‘çœ‹åˆ°å·²æ•…çš„å¥¶å¥¶ååœ¨å®¢å…é‡Œï¼Œå¥¹å¯¹æˆ‘å¾®ç¬‘ä½†æ²¡æœ‰è¯´è¯ã€‚çªç„¶æˆ¿å­å¼€å§‹å˜æš—ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆå®³æ€•ï¼Œæƒ³è¦é€ƒè·‘ä½†è…¿åƒè¢«é’‰ä½äº†ä¸€æ ·åŠ¨ä¸äº†..."></textarea>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="dreamDate">æ¢¦å¢ƒå‘ç”Ÿæ—¶é—´</label>
                            <select id="dreamDate" class="form-select">
                                <option value="today">ä»Šå¤©</option>
                                <option value="yesterday">æ˜¨å¤©</option>
                                <option value="thisweek">æœ¬å‘¨å†…</option>
                                <option value="lastweek">ä¸Šå‘¨</option>
                                <option value="thismonth">æœ¬æœˆå†…</option>
                                <option value="longer">æ›´ä¹…ä»¥å‰</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dreamClarity">æ¢¦å¢ƒæ¸…æ™°åº¦</label>
                            <select id="dreamClarity" class="form-select">
                                <option value="vague">æ¨¡ç³Šä¸æ¸…</option>
                                <option value="partial">éƒ¨åˆ†æ¸…æ™°</option>
                                <option value="clear">æ¯”è¾ƒæ¸…æ™°</option>
                                <option value="vivid">å¼‚å¸¸æ¸…æ™°</option>
                                <option value="hyperreal">è¶…ç°å®æ¸…æ™°</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ¢¦å¢ƒç±»å‹ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="lucid">
                                <span>æ¸…é†’æ¢¦ï¼ˆæ„è¯†åˆ°åœ¨åšæ¢¦ï¼‰</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="nightmare">
                                <span>å™©æ¢¦</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="recurring">
                                <span>é‡å¤æ¢¦å¢ƒ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="prophetic">
                                <span>é¢„çŸ¥æ€§æ¢¦å¢ƒ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="sexual">
                                <span>æ€§ç›¸å…³æ¢¦å¢ƒ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="flying">
                                <span>é£è¡Œæ¢¦</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="falling">
                                <span>å è½æ¢¦</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamTypes" value="chase">
                                <span>è¿½é€æ¢¦</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬ä¸‰æ­¥ï¼šè¯¦ç»†è¦ç´  -->
                <div class="step-panel" id="step3">
                    <h2 class="section-title">ğŸ” æ¢¦å¢ƒè¦ç´ åˆ†æ</h2>

                    <div class="form-group">
                        <label>æ¢¦ä¸­å‡ºç°çš„äººç‰©ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="family">
                                <span>å®¶äºº</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="friends">
                                <span>æœ‹å‹</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="romantic">
                                <span>æ‹äºº/ä¼´ä¾£</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="colleagues">
                                <span>åŒäº‹</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="strangers">
                                <span>é™Œç”Ÿäºº</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="celebrities">
                                <span>åäºº</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="deceased">
                                <span>å·²æ•…çš„äºº</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamCharacters" value="children">
                                <span>å°å­©</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ¢¦å¢ƒå‘ç”Ÿçš„åœºæ‰€ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="home">
                                <span>å®¶é‡Œ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="school">
                                <span>å­¦æ ¡</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="workplace">
                                <span>å·¥ä½œåœºæ‰€</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="nature">
                                <span>è‡ªç„¶ç¯å¢ƒ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="city">
                                <span>åŸå¸‚è¡—é“</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="unknown">
                                <span>æœªçŸ¥åœ°ç‚¹</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="fantasy">
                                <span>å¹»æƒ³åœºæ‰€</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamLocations" value="childhood">
                                <span>ç«¥å¹´è®°å¿†ä¸­çš„åœ°æ–¹</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ¢¦ä¸­çš„é‡è¦ç‰©å“/ç¬¦å·ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="water">
                                <span>æ°´ï¼ˆæ²³æµã€æµ·æ´‹ã€é›¨ç­‰ï¼‰</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="fire">
                                <span>ç«ï¼ˆç«ç„°ã€çˆ†ç‚¸ç­‰ï¼‰</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="animals">
                                <span>åŠ¨ç‰©</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="vehicles">
                                <span>äº¤é€šå·¥å…·</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="money">
                                <span>é‡‘é’±/ç å®</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="food">
                                <span>é£Ÿç‰©</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="books">
                                <span>ä¹¦ç±/æ–‡å­—</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamSymbols" value="technology">
                                <span>ç”µå­è®¾å¤‡</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬å››æ­¥ï¼šæƒ…æ„ŸçŠ¶æ€ -->
                <div class="step-panel" id="step4">
                    <h2 class="section-title">ğŸ’­ æƒ…æ„Ÿä¸å¿ƒç†çŠ¶æ€</h2>

                    <div class="form-group">
                        <label>æ¢¦ä¸­çš„ä¸»è¦æƒ…æ„Ÿï¼ˆæŒ‰å¼ºåº¦æ’åºï¼Œæœ€å¤šé€‰3ä¸ªï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="fear">
                                <span>ğŸ˜¨ ææƒ§/å®³æ€•</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="joy">
                                <span>ğŸ˜Š å¿«ä¹/å…´å¥‹</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="sadness">
                                <span>ğŸ˜¢ æ‚²ä¼¤/æ²®ä¸§</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="anger">
                                <span>ğŸ˜  æ„¤æ€’/çƒ¦èº</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="anxiety">
                                <span>ğŸ˜° ç„¦è™‘/æ‹…å¿ƒ</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="love">
                                <span>ğŸ˜ çˆ±æ„/æ¸©æš–</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="confusion">
                                <span>ğŸ˜µ å›°æƒ‘/è¿·èŒ«</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="dreamEmotions" value="peace">
                                <span>ğŸ˜Œ å¹³é™/å®‰è¯¦</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>é†’æ¥åçš„æ„Ÿå—å¼ºåº¦</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="5" class="slider" id="emotionIntensity">
                            <div class="slider-labels">
                                <span>å¾ˆæ·¡</span>
                                <span>ä¸­ç­‰</span>
                                <span>éå¸¸å¼ºçƒˆ</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ¢¦å¢ƒå¯¹æ‚¨çš„å½±å“</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="dreamImpact" value="positive">
                                <span>æ­£é¢å½±å“</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamImpact" value="negative">
                                <span>è´Ÿé¢å½±å“</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamImpact" value="neutral">
                                <span>ä¸­æ€§/æ— å½±å“</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamImpact" value="mixed">
                                <span>å¤æ‚æ„Ÿå—</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="wakeUpFeeling">é†’æ¥åçš„å…·ä½“æ„Ÿå—å’Œæƒ³æ³•</label>
                        <textarea id="wakeUpFeeling" class="form-textarea" rows="4"
                                  placeholder="è¯·æè¿°æ‚¨é†’æ¥åçš„ç¬¬ä¸€æ„Ÿå—ï¼Œä»¥åŠè¿™ä¸ªæ¢¦å¯¹æ‚¨å½“å¤©å¿ƒæƒ…çš„å½±å“..."></textarea>
                    </div>
                </div>

                <!-- ç¬¬äº”æ­¥ï¼šç”Ÿæ´»èƒŒæ™¯ -->
                <div class="step-panel" id="step5">
                    <h2 class="section-title">ğŸ  ç”Ÿæ´»èƒŒæ™¯åˆ†æ</h2>

                    <div class="form-group">
                        <label>è¿‘æœŸç”Ÿæ´»ä¸­çš„é‡è¦äº‹ä»¶ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="work_change">
                                <span>å·¥ä½œå˜åŒ–</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="relationship_change">
                                <span>æ„Ÿæƒ…å˜åŒ–</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="family_issues">
                                <span>å®¶åº­é—®é¢˜</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="health_concerns">
                                <span>å¥åº·æ‹…å¿§</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="financial_stress">
                                <span>ç»æµå‹åŠ›</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="study_pressure">
                                <span>å­¦ä¹ å‹åŠ›</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="moving">
                                <span>æ¬å®¶/ç¯å¢ƒå˜åŒ–</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="lifeEvents" value="loss">
                                <span>å¤±å»é‡è¦çš„äººæˆ–äº‹ç‰©</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>å½“å‰æœ€å…³å¿ƒçš„é—®é¢˜</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="career">
                                <span>äº‹ä¸šå‘å±•</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="relationships">
                                <span>äººé™…å…³ç³»</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="health">
                                <span>å¥åº·çŠ¶å†µ</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="family">
                                <span>å®¶åº­å’Œç¦</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="future">
                                <span>æœªæ¥è§„åˆ’</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mainConcern" value="self">
                                <span>è‡ªæˆ‘æˆé•¿</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>åšæ¢¦é¢‘ç‡</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="dreamFrequency" value="daily">
                                <span>å‡ ä¹æ¯å¤©</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamFrequency" value="weekly">
                                <span>æ¯å‘¨å‡ æ¬¡</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamFrequency" value="monthly">
                                <span>æ¯æœˆå‡ æ¬¡</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="dreamFrequency" value="rarely">
                                <span>å¾ˆå°‘åšæ¢¦</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="additionalContext">å…¶ä»–ç›¸å…³èƒŒæ™¯ä¿¡æ¯</label>
                        <textarea id="additionalContext" class="form-textarea" rows="4"
                                  placeholder="è¯·è¡¥å……ä»»ä½•æ‚¨è®¤ä¸ºå¯èƒ½ä¸è¿™ä¸ªæ¢¦å¢ƒç›¸å…³çš„èƒŒæ™¯ä¿¡æ¯ï¼Œæ¯”å¦‚æœ€è¿‘çœ‹è¿‡çš„ç”µå½±ã€ä¹¦ç±ã€æ–°é—»ï¼Œæˆ–è€…å¿ƒé‡Œä¸€ç›´åœ¨æ€è€ƒçš„é—®é¢˜..."></textarea>
                    </div>
                </div>

                <!-- ç¬¬å…­æ­¥ï¼šåˆ†æç»“æœ -->
                <div class="step-panel" id="step6">
                    <div id="analysisResults" style="display: none;">
                        <!-- åˆ†æç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="mystical-spinner"></div>
            <div class="loading-text">AIæ­£åœ¨æ·±åº¦åˆ†ææ‚¨çš„æ¢¦å¢ƒ...</div>
            <div class="loading-subtext">è¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿæ—¶é—´</div>
        </div>
    </div>

    <script>
        class ProfessionalDreamAnalyzer {
            constructor() {
                this.currentStep = 1;
                this.totalSteps = 6;
                this.formData = {};
                this.analysisComplete = false;
            }

            updateProgress() {
                const percentage = (this.currentStep / this.totalSteps) * 100;
                document.getElementById('progressFill').style.width = percentage + '%';
            }

            updateStepIndicator() {
                document.querySelectorAll('.step').forEach((step, index) => {
                    const stepNumber = index + 1;
                    step.classList.remove('active', 'completed');

                    if (stepNumber < this.currentStep) {
                        step.classList.add('completed');
                        step.querySelector('.step-circle').innerHTML = 'âœ“';
                    } else if (stepNumber === this.currentStep) {
                        step.classList.add('active');
                        step.querySelector('.step-circle').innerHTML = stepNumber;
                    } else {
                        step.querySelector('.step-circle').innerHTML = stepNumber;
                    }
                });
            }

            showStep(stepNumber) {
                document.querySelectorAll('.step-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(`step${stepNumber}`).classList.add('active');

                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                document.getElementById('prevBtn').style.display = stepNumber > 1 ? 'block' : 'none';

                if (stepNumber === this.totalSteps) {
                    document.getElementById('nextBtn').style.display = 'none';
                } else {
                    document.getElementById('nextBtn').style.display = 'block';
                    document.getElementById('nextBtn').textContent = stepNumber === this.totalSteps - 1 ? 'å¼€å§‹åˆ†æ' : 'ä¸‹ä¸€æ­¥';
                }
            }

            validateStep(stepNumber) {
                switch(stepNumber) {
                    case 1:
                        return this.validatePersonalInfo();
                    case 2:
                        return this.validateDreamDescription();
                    case 3:
                        return true; // å¯é€‰é¡¹
                    case 4:
                        return this.validateEmotions();
                    case 5:
                        return true; // å¯é€‰é¡¹
                    default:
                        return true;
                }
            }

            validatePersonalInfo() {
                const age = document.getElementById('age').value;
                const gender = document.getElementById('gender').value;

                if (!age || !gender) {
                    alert('è¯·å¡«å†™åŸºç¡€çš„å¹´é¾„å’Œæ€§åˆ«ä¿¡æ¯');
                    return false;
                }
                return true;
            }

            validateDreamDescription() {
                const description = document.getElementById('dreamDescription').value.trim();

                if (!description || description.length < 20) {
                    alert('è¯·æä¾›è‡³å°‘20å­—çš„è¯¦ç»†æ¢¦å¢ƒæè¿°');
                    return false;
                }
                return true;
            }

            validateEmotions() {
                const emotions = document.querySelectorAll('input[name="dreamEmotions"]:checked');

                if (emotions.length === 0) {
                    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§æ¢¦ä¸­çš„æƒ…æ„ŸçŠ¶æ€');
                    return false;
                }
                return true;
            }

            collectFormData() {
                this.formData = {
                    // ä¸ªäººä¿¡æ¯
                    age: document.getElementById('age').value,
                    gender: document.getElementById('gender').value,
                    occupation: document.getElementById('occupation').value,
                    relationship: document.getElementById('relationship').value,
                    stressLevel: document.getElementById('stressLevel').value,
                    sleepQuality: document.querySelector('input[name="sleepQuality"]:checked')?.value,

                    // æ¢¦å¢ƒæè¿°
                    dreamDescription: document.getElementById('dreamDescription').value,
                    dreamDate: document.getElementById('dreamDate').value,
                    dreamClarity: document.getElementById('dreamClarity').value,
                    dreamTypes: Array.from(document.querySelectorAll('input[name="dreamTypes"]:checked')).map(cb => cb.value),

                    // æ¢¦å¢ƒè¦ç´ 
                    dreamCharacters: Array.from(document.querySelectorAll('input[name="dreamCharacters"]:checked')).map(cb => cb.value),
                    dreamLocations: Array.from(document.querySelectorAll('input[name="dreamLocations"]:checked')).map(cb => cb.value),
                    dreamSymbols: Array.from(document.querySelectorAll('input[name="dreamSymbols"]:checked')).map(cb => cb.value),

                    // æƒ…æ„ŸçŠ¶æ€
                    dreamEmotions: Array.from(document.querySelectorAll('input[name="dreamEmotions"]:checked')).map(cb => cb.value),
                    emotionIntensity: document.getElementById('emotionIntensity').value,
                    dreamImpact: document.querySelector('input[name="dreamImpact"]:checked')?.value,
                    wakeUpFeeling: document.getElementById('wakeUpFeeling').value,

                    // ç”Ÿæ´»èƒŒæ™¯
                    lifeEvents: Array.from(document.querySelectorAll('input[name="lifeEvents"]:checked')).map(cb => cb.value),
                    mainConcern: document.querySelector('input[name="mainConcern"]:checked')?.value,
                    dreamFrequency: document.querySelector('input[name="dreamFrequency"]:checked')?.value,
                    additionalContext: document.getElementById('additionalContext').value
                };
            }

            async startAnalysis() {
                this.collectFormData();
                this.showLoading();

                // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
                await this.delay(3000);

                const analysis = this.generateProfessionalAnalysis();
                this.displayAnalysis(analysis);
                this.hideLoading();
            }

            generateProfessionalAnalysis() {
                return {
                    overallInterpretation: this.generateOverallInterpretation(),
                    psychologicalAnalysis: this.generatePsychologicalAnalysis(),
                    symbolAnalysis: this.generateSymbolAnalysis(),
                    emotionalState: this.generateEmotionalState(),
                    personalGuidance: this.generatePersonalGuidance(),
                    scores: this.calculateProfessionalScores()
                };
            }

            generateOverallInterpretation() {
                const data = this.formData;
                let interpretation = `åŸºäºæ‚¨æä¾›çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿™ä¸ªæ¢¦å¢ƒåæ˜ äº†æ‚¨å½“å‰çš„å¿ƒç†çŠ¶æ€å’Œæ½œæ„è¯†éœ€æ±‚ã€‚`;

                // æ ¹æ®å‹åŠ›æ°´å¹³è°ƒæ•´è§£é‡Š
                if (data.stressLevel > 7) {
                    interpretation += ` æ‚¨å½“å‰æ‰¿å—ç€è¾ƒé«˜çš„ç”Ÿæ´»å‹åŠ›ï¼Œæ¢¦å¢ƒå¯èƒ½æ˜¯æ‚¨å¿ƒçµå¯»æ±‚é‡Šæ”¾å’Œå¹³è¡¡çš„è¡¨ç°ã€‚`;
                } else if (data.stressLevel < 4) {
                    interpretation += ` æ‚¨çš„ç”Ÿæ´»çŠ¶æ€ç›¸å¯¹è½»æ¾ï¼Œæ¢¦å¢ƒæ›´å¤šåæ˜ äº†å†…å¿ƒçš„åˆ›é€ åŠ›å’Œæƒ³è±¡åŠ›ã€‚`;
                }

                // æ ¹æ®å¹´é¾„æ®µè°ƒæ•´
                if (data.age === '18-25') {
                    interpretation += ` ä½œä¸ºå¹´è½»äººï¼Œæ‚¨çš„æ¢¦å¢ƒå¾€å¾€ä¸æœªæ¥è§„åˆ’ã€è‡ªæˆ‘è®¤çŸ¥å’Œäººé™…å…³ç³»å¯†åˆ‡ç›¸å…³ã€‚`;
                } else if (data.age === '26-35') {
                    interpretation += ` åœ¨äººç”Ÿçš„è¿™ä¸ªé˜¶æ®µï¼Œæ‚¨çš„æ¢¦å¢ƒå¯èƒ½æ›´å¤šæ¶‰åŠäº‹ä¸šå‘å±•å’Œç”Ÿæ´»é€‰æ‹©çš„æ€è€ƒã€‚`;
                }

                // æ ¹æ®æƒ…æ„ŸçŠ¶æ€è°ƒæ•´
                if (data.dreamEmotions.includes('fear')) {
                    interpretation += ` æ¢¦ä¸­çš„ææƒ§æƒ…ç»ªæç¤ºæ‚¨å¯èƒ½æ­£åœ¨é¢å¯¹æŸäº›æœªçŸ¥çš„æŒ‘æˆ˜æˆ–å˜åŒ–ï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„å¿ƒç†ååº”ã€‚`;
                }

                return interpretation + ` é€šè¿‡æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£æ‚¨å†…å¿ƒçš„çœŸå®éœ€æ±‚ã€‚`;
            }

            generatePsychologicalAnalysis() {
                const data = this.formData;
                let analysis = {};

                // å¼—æ´›ä¼Šå¾·ç†è®ºåˆ†æ
                analysis.freudian = `ä»å¼—æ´›ä¼Šå¾·çš„ç²¾ç¥åˆ†æè§’åº¦æ¥çœ‹ï¼Œ`;
                if (data.dreamSymbols.includes('water')) {
                    analysis.freudian += `æ¢¦ä¸­çš„æ°´è±¡å¾ç€æ— æ„è¯†å’Œæƒ…æ„Ÿçš„æµåŠ¨ï¼Œå¯èƒ½ä»£è¡¨æ‚¨å¯¹æƒ…æ„Ÿè¡¨è¾¾çš„æ¸´æœ›ã€‚`;
                }
                if (data.dreamCharacters.includes('family')) {
                    analysis.freudian += `å®¶äººçš„å‡ºç°åæ˜ äº†æ‚¨å†…å¿ƒå¯¹å®‰å…¨æ„Ÿå’Œå½’å±æ„Ÿçš„éœ€æ±‚ã€‚`;
                }

                // è£æ ¼ç†è®ºåˆ†æ
                analysis.jungian = `æ ¹æ®è£æ ¼çš„é›†ä½“æ— æ„è¯†ç†è®ºï¼Œ`;
                if (data.dreamSymbols.includes('animals')) {
                    analysis.jungian += `åŠ¨ç‰©åœ¨æ¢¦ä¸­å¾€å¾€ä»£è¡¨æ‚¨çš„æœ¬èƒ½å’ŒåŸå§‹èƒ½é‡ï¼Œæç¤ºæ‚¨å…³æ³¨å†…åœ¨çš„ç›´è§‰åŠ›é‡ã€‚`;
                }
                if (data.dreamLocations.includes('unknown')) {
                    analysis.jungian += `æœªçŸ¥åœ°ç‚¹è±¡å¾ç€æ‚¨æ­£åœ¨æ¢ç´¢è‡ªæˆ‘çš„æ–°é¢†åŸŸï¼Œè¿™æ˜¯å¿ƒç†æˆé•¿çš„æ ‡å¿—ã€‚`;
                }

                // ç°ä»£è®¤çŸ¥ç†è®º
                analysis.cognitive = `ä»è®¤çŸ¥å¿ƒç†å­¦è§’åº¦åˆ†æï¼Œè¿™ä¸ªæ¢¦å¢ƒæ˜¯æ‚¨å¤§è„‘æ•´ç†ç™½å¤©ä¿¡æ¯å’Œæƒ…æ„Ÿçš„è¿‡ç¨‹ã€‚`;
                if (data.dreamClarity === 'vivid') {
                    analysis.cognitive += `å¼‚å¸¸æ¸…æ™°çš„æ¢¦å¢ƒé€šå¸¸è¡¨æ˜æ‚¨çš„å¤§è„‘æ­£åœ¨å¤„ç†é‡è¦çš„å¿ƒç†ä¿¡æ¯ã€‚`;
                }

                return analysis;
            }

            generateSymbolAnalysis() {
                const symbols = this.formData.dreamSymbols;
                const analysis = [];

                const symbolMeanings = {
                    'water': {
                        title: 'æ°´çš„è±¡å¾',
                        meaning: 'ä»£è¡¨æƒ…æ„Ÿã€æ½œæ„è¯†å’Œç”Ÿå‘½åŠ›ã€‚æ¸…æ¾ˆçš„æ°´æš—ç¤ºæƒ…æ„Ÿå¥åº·ï¼Œæµ‘æµŠçš„æ°´å¯èƒ½è¡¨ç¤ºæƒ…æ„Ÿå›°æ‰°ã€‚'
                    },
                    'fire': {
                        title: 'ç«çš„è±¡å¾',
                        meaning: 'è±¡å¾æ¿€æƒ…ã€èƒ½é‡å’Œè½¬åŒ–ã€‚å¯èƒ½ä»£è¡¨æ‚¨å†…å¿ƒçš„å¼ºçƒˆæ¬²æœ›æˆ–æ­£åœ¨ç»å†çš„é‡å¤§å˜åŒ–ã€‚'
                    },
                    'animals': {
                        title: 'åŠ¨ç‰©è±¡å¾',
                        meaning: 'ä»£è¡¨æœ¬èƒ½ã€ç›´è§‰å’ŒåŸå§‹èƒ½é‡ã€‚ä¸åŒåŠ¨ç‰©æœ‰ä¸åŒå«ä¹‰ï¼šçŒ«è±¡å¾ç‹¬ç«‹ï¼Œç‹—è±¡å¾å¿ è¯šï¼Œé¸Ÿè±¡å¾è‡ªç”±ã€‚'
                    },
                    'vehicles': {
                        title: 'äº¤é€šå·¥å…·',
                        meaning: 'è±¡å¾äººç”Ÿæ–¹å‘å’Œæ§åˆ¶åŠ›ã€‚æ±½è½¦ä»£è¡¨ä¸ªäººæ§åˆ¶ï¼Œç«è½¦ä»£è¡¨æ—¢å®šè½¨é“ï¼Œé£æœºä»£è¡¨é«˜è¿œç›®æ ‡ã€‚'
                    }
                };

                symbols.forEach(symbol => {
                    if (symbolMeanings[symbol]) {
                        analysis.push(symbolMeanings[symbol]);
                    }
                });

                return analysis;
            }

            generateEmotionalState() {
                const emotions = this.formData.dreamEmotions;
                const intensity = parseInt(this.formData.emotionIntensity);

                const emotionScores = {};
                emotions.forEach(emotion => {
                    emotionScores[emotion] = Math.min(intensity * 10 + Math.random() * 20, 100);
                });

                return {
                    dominantEmotions: emotions.slice(0, 3),
                    intensity: intensity,
                    scores: emotionScores,
                    interpretation: this.getEmotionalInterpretation(emotions, intensity)
                };
            }

            getEmotionalInterpretation(emotions, intensity) {
                let interpretation = '';

                if (emotions.includes('fear') && intensity > 6) {
                    interpretation += 'æ‚¨çš„æ¢¦å¢ƒæ˜¾ç¤ºå‡ºè¾ƒå¼ºçš„ç„¦è™‘æƒ…ç»ªï¼Œè¿™å¯èƒ½ä¸ç°å®ç”Ÿæ´»ä¸­çš„å‹åŠ›æºæœ‰å…³ã€‚';
                }

                if (emotions.includes('joy') && emotions.includes('sadness')) {
                    interpretation += 'æ¢¦å¢ƒä¸­å‡ºç°çš„å¤æ‚æƒ…æ„Ÿåæ˜ äº†æ‚¨å†…å¿ƒçš„çŸ›ç›¾çŠ¶æ€ï¼Œè¿™æ˜¯å¤„ç†å¤æ‚æƒ…å†µæ—¶çš„æ­£å¸¸ååº”ã€‚';
                }

                if (intensity > 8) {
                    interpretation += 'å¼ºçƒˆçš„æƒ…æ„Ÿä½“éªŒè¡¨æ˜è¿™ä¸ªæ¢¦å¢ƒå¯¹æ‚¨å…·æœ‰é‡è¦æ„ä¹‰ï¼Œå€¼å¾—æ·±å…¥æ€è€ƒã€‚';
                }

                return interpretation || 'æ‚¨çš„æƒ…æ„ŸçŠ¶æ€ç›¸å¯¹å¹³è¡¡ï¼Œæ¢¦å¢ƒåæ˜ äº†æ­£å¸¸çš„å¿ƒç†å¤„ç†è¿‡ç¨‹ã€‚';
            }

            generatePersonalGuidance() {
                const data = this.formData;
                const recommendations = [];

                // åŸºäºå‹åŠ›æ°´å¹³çš„å»ºè®®
                if (data.stressLevel > 7) {
                    recommendations.push('å»ºè®®æ‚¨é‡‡å–ä¸€äº›å‡å‹æªæ–½ï¼Œå¦‚å†¥æƒ³ã€è¿åŠ¨æˆ–ä¸æœ‹å‹äº¤æµ');
                    recommendations.push('è€ƒè™‘è°ƒæ•´å·¥ä½œç”Ÿæ´»å¹³è¡¡ï¼Œç»™è‡ªå·±æ›´å¤šä¼‘æ¯æ—¶é—´');
                }

                // åŸºäºç¡çœ è´¨é‡çš„å»ºè®®
                if (data.sleepQuality === 'poor' || data.sleepQuality === 'terrible') {
                    recommendations.push('æ”¹å–„ç¡çœ ç¯å¢ƒå’Œç¡å‰ä¹ æƒ¯ï¼Œæœ‰åŠ©äºè·å¾—æ›´å¥½çš„ç¡çœ è´¨é‡');
                    recommendations.push('é¿å…ç¡å‰ä½¿ç”¨ç”µå­è®¾å¤‡ï¼Œå°è¯•æ”¾æ¾æŠ€å·§');
                }

                // åŸºäºä¸»è¦å…³æ³¨çš„å»ºè®®
                if (data.mainConcern === 'relationships') {
                    recommendations.push('å…³æ³¨äººé™…å…³ç³»çš„æ¢¦å¢ƒæç¤ºæ‚¨é‡è§†æ²Ÿé€šå’Œç†è§£çš„é‡è¦æ€§');
                }

                // åŸºäºæ¢¦å¢ƒç±»å‹çš„å»ºè®®
                if (data.dreamTypes.includes('recurring')) {
                    recommendations.push('é‡å¤æ€§æ¢¦å¢ƒé€šå¸¸æš—ç¤ºæœªè§£å†³çš„å¿ƒç†é—®é¢˜ï¼Œå»ºè®®æ·±å…¥æ€è€ƒå…¶å«ä¹‰');
                }

                return recommendations.length > 0 ? recommendations : [
                    'ç»§ç»­ä¿æŒç°åœ¨çš„ç”Ÿæ´»çŠ¶æ€ï¼Œæ³¨æ„è§‚å¯Ÿæ¢¦å¢ƒçš„å˜åŒ–æ¨¡å¼',
                    'è®°å½•æ¢¦å¢ƒæ—¥è®°ï¼Œæœ‰åŠ©äºæ›´å¥½åœ°äº†è§£è‡ªå·±çš„æ½œæ„è¯†',
                    'ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œå°†æ¢¦å¢ƒä½œä¸ºè‡ªæˆ‘äº†è§£çš„å·¥å…·'
                ];
            }

            calculateProfessionalScores() {
                const data = this.formData;

                // å¿ƒç†å¥åº·æŒ‡æ•°
                let mentalHealth = 80;
                if (data.stressLevel > 7) mentalHealth -= 15;
                if (data.sleepQuality === 'poor') mentalHealth -= 10;
                if (data.dreamEmotions.includes('fear')) mentalHealth -= 5;

                // æƒ…æ„Ÿç¨³å®šæ€§
                let emotionalStability = 75;
                if (data.dreamEmotions.length > 3) emotionalStability -= 10;
                if (data.emotionIntensity > 8) emotionalStability -= 10;

                // å‹åŠ›ç®¡ç†
                let stressManagement = 100 - (data.stressLevel * 8);

                // è‡ªæˆ‘è®¤çŸ¥
                let selfAwareness = 70;
                if (data.dreamClarity === 'vivid') selfAwareness += 15;
                if (data.dreamTypes.includes('lucid')) selfAwareness += 10;

                // ç”Ÿæ´»æ»¡æ„åº¦
                let lifeSatisfaction = 75;
                if (data.lifeEvents.length > 3) lifeSatisfaction -= 15;
                if (data.mainConcern) lifeSatisfaction += 5; // æœ‰æ˜ç¡®å…³æ³¨ç‚¹æ˜¯å¥½äº‹

                return {
                    mentalHealth: Math.max(0, Math.min(100, mentalHealth)),
                    emotionalStability: Math.max(0, Math.min(100, emotionalStability)),
                    stressManagement: Math.max(0, Math.min(100, stressManagement)),
                    selfAwareness: Math.max(0, Math.min(100, selfAwareness)),
                    lifeSatisfaction: Math.max(0, Math.min(100, lifeSatisfaction))
                };
            }

            displayAnalysis(analysis) {
                const resultsContainer = document.getElementById('analysisResults');

                resultsContainer.innerHTML = `
                    <div class="analysis-result">
                        <div class="result-header">
                            <h2 class="result-title">ğŸ”® æ·±åº¦è§£æ¢¦åˆ†ææŠ¥å‘Š</h2>
                            <div class="result-subtitle">åŸºäºä¸“ä¸šå¿ƒç†å­¦ç†è®ºçš„å…¨é¢æ¢¦å¢ƒè§£æ</div>
                        </div>

                        <div class="analysis-tabs">
                            <button class="tab-btn active" onclick="switchAnalysisTab('overall')">ç»¼åˆè§£è¯»</button>
                            <button class="tab-btn" onclick="switchAnalysisTab('psychology')">å¿ƒç†åˆ†æ</button>
                            <button class="tab-btn" onclick="switchAnalysisTab('symbols')">ç¬¦å·è§£æ</button>
                            <button class="tab-btn" onclick="switchAnalysisTab('emotional')">æƒ…æ„ŸçŠ¶æ€</button>
                            <button class="tab-btn" onclick="switchAnalysisTab('guidance')">ä¸ªäººæŒ‡å¯¼</button>
                        </div>

                        <div class="tab-content active" id="overallTab">
                            <div class="analysis-section">
                                <h3 class="analysis-title">ğŸ¯ ç»¼åˆè§£è¯»</h3>
                                <div class="analysis-content">${analysis.overallInterpretation}</div>
                            </div>

                            <div class="score-grid">
                                <div class="score-card">
                                    <div class="score-value">${analysis.scores.mentalHealth}</div>
                                    <div class="score-label">å¿ƒç†å¥åº·æŒ‡æ•°</div>
                                    <div class="score-bar">
                                        <div class="score-bar-fill" style="width: ${analysis.scores.mentalHealth}%"></div>
                                    </div>
                                </div>
                                <div class="score-card">
                                    <div class="score-value">${analysis.scores.emotionalStability}</div>
                                    <div class="score-label">æƒ…æ„Ÿç¨³å®šæ€§</div>
                                    <div class="score-bar">
                                        <div class="score-bar-fill" style="width: ${analysis.scores.emotionalStability}%"></div>
                                    </div>
                                </div>
                                <div class="score-card">
                                    <div class="score-value">${analysis.scores.stressManagement}</div>
                                    <div class="score-label">å‹åŠ›ç®¡ç†èƒ½åŠ›</div>
                                    <div class="score-bar">
                                        <div class="score-bar-fill" style="width: ${analysis.scores.stressManagement}%"></div>
                                    </div>
                                </div>
                                <div class="score-card">
                                    <div class="score-value">${analysis.scores.selfAwareness}</div>
                                    <div class="score-label">è‡ªæˆ‘è®¤çŸ¥æ°´å¹³</div>
                                    <div class="score-bar">
                                        <div class="score-bar-fill" style="width: ${analysis.scores.selfAwareness}%"></div>
                                    </div>
                                </div>
                                <div class="score-card">
                                    <div class="score-value">${analysis.scores.lifeSatisfaction}</div>
                                    <div class="score-label">ç”Ÿæ´»æ»¡æ„åº¦</div>
                                    <div class="score-bar">
                                        <div class="score-bar-fill" style="width: ${analysis.scores.lifeSatisfaction}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="psychologyTab">
                            <div class="analysis-section">
                                <h3 class="analysis-title">ğŸ§  å¼—æ´›ä¼Šå¾·ç²¾ç¥åˆ†æ</h3>
                                <div class="analysis-content">${analysis.psychologicalAnalysis.freudian}</div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="analysis-title">ğŸ­ è£æ ¼é›†ä½“æ— æ„è¯†</h3>
                                <div class="analysis-content">${analysis.psychologicalAnalysis.jungian}</div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="analysis-title">ğŸ”¬ ç°ä»£è®¤çŸ¥ç†è®º</h3>
                                <div class="analysis-content">${analysis.psychologicalAnalysis.cognitive}</div>
                            </div>
                        </div>

                        <div class="tab-content" id="symbolsTab">
                            <div class="symbols-grid">
                                ${analysis.symbolAnalysis.map(symbol => `
                                    <div class="symbol-card">
                                        <div class="symbol-title">${symbol.title}</div>
                                        <div class="symbol-meaning">${symbol.meaning}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="tab-content" id="emotionalTab">
                            <div class="analysis-section">
                                <h3 class="analysis-title">ğŸ’­ æƒ…æ„ŸçŠ¶æ€åˆ†æ</h3>
                                <div class="analysis-content">${analysis.emotionalState.interpretation}</div>
                            </div>

                            <div class="emotional-state">
                                ${Object.entries(analysis.emotionalState.scores).map(([emotion, score]) => `
                                    <div class="emotion-indicator">
                                        <div class="emotion-icon">${this.getEmotionIcon(emotion)}</div>
                                        <div class="emotion-value">${Math.round(score)}</div>
                                        <div class="emotion-label">${this.getEmotionLabel(emotion)}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="tab-content" id="guidanceTab">
                            <div class="recommendations">
                                <h3>ğŸ’¡ ä¸ªäººåŒ–å»ºè®®</h3>
                                <ul class="recommendation-list">
                                    ${analysis.personalGuidance.map(rec => `<li>${rec}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;

                resultsContainer.style.display = 'block';
                this.currentStep = 6;
                this.updateStepIndicator();
                this.updateProgress();
                this.showStep(6);

                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }

            getEmotionIcon(emotion) {
                const icons = {
                    'fear': 'ğŸ˜¨',
                    'joy': 'ğŸ˜Š',
                    'sadness': 'ğŸ˜¢',
                    'anger': 'ğŸ˜ ',
                    'anxiety': 'ğŸ˜°',
                    'love': 'ğŸ˜',
                    'confusion': 'ğŸ˜µ',
                    'peace': 'ğŸ˜Œ'
                };
                return icons[emotion] || 'ğŸ˜';
            }

            getEmotionLabel(emotion) {
                const labels = {
                    'fear': 'ææƒ§',
                    'joy': 'å¿«ä¹',
                    'sadness': 'æ‚²ä¼¤',
                    'anger': 'æ„¤æ€’',
                    'anxiety': 'ç„¦è™‘',
                    'love': 'çˆ±æ„',
                    'confusion': 'å›°æƒ‘',
                    'peace': 'å¹³é™'
                };
                return labels[emotion] || emotion;
            }

            showLoading() {
                document.getElementById('loadingOverlay').style.display = 'flex';
            }

            hideLoading() {
                document.getElementById('loadingOverlay').style.display = 'none';
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            nextStep() {
                if (!this.validateStep(this.currentStep)) {
                    return;
                }

                if (this.currentStep === this.totalSteps - 1) {
                    // å¼€å§‹åˆ†æ
                    this.startAnalysis();
                    return;
                }

                if (this.currentStep < this.totalSteps) {
                    this.currentStep++;
                    this.updateStepIndicator();
                    this.updateProgress();
                    this.showStep(this.currentStep);
                }
            }

            previousStep() {
                if (this.currentStep > 1) {
                    this.currentStep--;
                    this.updateStepIndicator();
                    this.updateProgress();
                    this.showStep(this.currentStep);
                }
            }
        }

        // å…¨å±€å˜é‡å’Œå‡½æ•°
        let dreamAnalyzer;

        // åˆå§‹åŒ–
        window.onload = function() {
            dreamAnalyzer = new ProfessionalDreamAnalyzer();
            dreamAnalyzer.updateStepIndicator();
            dreamAnalyzer.updateProgress();
        };

        function nextStep() {
            dreamAnalyzer.nextStep();
        }

        function previousStep() {
            dreamAnalyzer.previousStep();
        }

        function switchAnalysisTab(tabName) {
            // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.analysis-tabs .tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾
            document.querySelector(`[onclick="switchAnalysisTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        // é™åˆ¶æƒ…æ„Ÿé€‰æ‹©æ•°é‡
        document.addEventListener('change', function(e) {
            if (e.target.name === 'dreamEmotions') {
                const checkedEmotions = document.querySelectorAll('input[name="dreamEmotions"]:checked');
                if (checkedEmotions.length > 3) {
                    e.target.checked = false;
                    alert('æœ€å¤šåªèƒ½é€‰æ‹©3ç§ä¸»è¦æƒ…æ„Ÿ');
                }
            }
        });
    </script>
</body>
</html>